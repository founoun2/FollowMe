
import React, { createContext, useContext, useState, ReactNode } from 'react';

type Language = 'EN' | 'FR' | 'AR';

interface I18nContextType {
  lang: Language;
  setLang: (lang: Language) => void;
  t: (key: string) => string;
  dir: 'ltr' | 'rtl';
}

const translations: Record<Language, Record<string, string>> = {
  EN: {
    // Nav
    'nav.home': 'Home',
    'nav.earn': 'Earn',
    'nav.create': 'Create',
    'nav.wallet': 'Wallet',
    'nav.profile': 'Profile',
    'nav.balance': 'Your Coins',
    'nav.add_credits': 'Add Coins',
    'nav.language': 'Language',

    // Dashboard
    'dash.overview': 'Overview',
    'dash.welcome': "Welcome back! Here's your growth activity.",
    'dash.active_campaigns': 'Active Campaigns',
    'dash.total_interactions': 'Total Interactions',
    'dash.earn_card_title': 'Earn Coins',
    'dash.earn_card_desc': 'Start completing tasks',
    'dash.chart_title': 'Engagement Analytics',
    'dash.chart_subtitle': 'Weekly interaction performance',
    'dash.recent_activity': 'Recent Activity',
    'dash.view_all': 'View All',
    'dash.level': 'Your Level',
    'dash.next_level': 'Next Level',
    'dash.reputation': 'Reputation Score',
    'dash.lvl_1': 'Novice',
    'dash.lvl_2': 'Rising Star',
    'dash.lvl_3': 'Influencer',
    'dash.lvl_4': 'Celebrity',

    // Earn
    'earn.title': 'Earn Coins',
    'earn.subtitle': 'Engage with others to build your balance.',
    'earn.streak': 'Daily Streak',
    'earn.days': 'Days',
    'earn.all_caught_up': 'All caught up!',
    'earn.no_tasks': 'No tasks available right now.',
    'earn.do_task': 'Do Task',
    'earn.verify': 'Verify & Claim',
    'earn.verifying': 'Checking...',
    'earn.skip': 'Skip',
    'earn.processing': '...',
    'earn.report': 'Report Task',
    'earn.report_title': 'Why are you reporting this?',
    'earn.report_spam': 'Spam or Scam',
    'earn.report_broken': 'Link is broken',
    'earn.report_offensive': 'Inappropriate Content',
    'earn.reported_msg': 'Task reported. Thank you for keeping us safe.',
    'earn.cancel': 'Cancel',
    'earn.submit_report': 'Submit Report',

    // Campaigns
    'camp.title': 'Campaigns',
    'camp.subtitle': 'Manage your promotions and reach.',
    'camp.new': 'New Campaign',
    'camp.details': 'Campaign Details',
    'camp.link_label': 'Link to Content',
    'camp.desc_label': 'Description / Caption',
    'camp.desc_place': 'Describe your content...',
    'camp.platform': 'Platform',
    'camp.goal': 'Goal',
    'camp.budget_label': 'Campaign Budget (Coins)',
    'camp.budget_desc': 'How much do you want to spend?',
    'camp.custom': 'Custom Amount',
    'camp.est_reach': 'Est. Reach',
    'camp.actions': 'actions',
    'camp.reward_label': 'Coins per Action',
    'camp.reward_desc': 'Higher coins attract more users faster.',
    'camp.targeting': 'Advanced Targeting',
    'camp.geo': 'Geo-Location',
    'camp.geo_desc': 'Target specific countries',
    'camp.preview': 'Preview',
    'camp.summary': 'Order Summary',
    'camp.total_cost': 'Total Spend',
    'camp.insufficient': 'Insufficient coins.',
    'camp.cancel': 'Cancel',
    'camp.launch': 'Launch Campaign',
    'camp.no_active': 'No Active Campaigns',
    'camp.create_first': 'Create First Campaign',
    'camp.progress': 'Progress',
    'camp.edit': 'Edit Campaign',
    'camp.pause': 'Pause Campaign',
    'camp.resume': 'Resume Campaign',
    'camp.delete': 'Delete Campaign',
    'camp.delete_confirm': 'Are you sure? Unused coins will be refunded to your wallet.',
    'camp.refunded': 'Coins Refunded',
    'camp.save_changes': 'Save Changes',
    'camp.confirm_delete': 'Yes, Delete',
    'camp.updated': 'Campaign Updated',

    // Wallet
    'wallet.title': 'Wallet',
    'wallet.balance': 'Current Balance',
    'wallet.credits': 'coins',
    'wallet.billing': 'Billing Region',
    'wallet.buy_title': 'Buy Coins',
    'wallet.best_value': 'Best Value',
    'wallet.buy_now': 'Buy Now',
    'wallet.history': 'Transaction History',
    'wallet.pay_modal': 'Complete Purchase',
    'wallet.pay_method': 'Payment Method',
    'wallet.pay_secure': 'SSL Secure Payment',
    'wallet.pay_btn': 'Pay',
    'wallet.watch_earn': 'Watch & Earn',
    'wallet.watch_desc': 'Watch short videos to earn free coins.',
    'wallet.watch_btn': 'Watch Video',
    'wallet.watch_reward': '+2 Coins / Video',
    'wallet.ad_limit': 'Daily Limit: 100 Coins',
    'wallet.ad_watching': 'Watching Ad',
    'wallet.ad_wait': 'Reward in',
    'wallet.ad_claim': 'Claim +2 Coins',
    'wallet.ad_limit_hit': 'Daily Limit Reached',

    // Profile
    'prof.invite': 'Invite Friends & Earn',
    'prof.invite_desc': 'Get 50 coins for every friend who joins.',
    'prof.copy_link': 'Copy Invite Link',
    'prof.link_copied': 'Link Copied!',
    'prof.linked': 'Linked Accounts',
    'prof.connect': 'Connect',
    'prof.connected': 'Connected',
    'prof.account': 'Account',
    'prof.notif': 'Notifications',
    'prof.privacy': 'Privacy & Security',
    'prof.lang': 'Language & Region',
    'prof.support': 'Support',
    'prof.help': 'Help Center',
    'prof.legal': 'Terms & Privacy',
    'prof.sign_out': 'Sign Out',
    'prof.save': 'Save Changes',

    // Onboarding
    'onb.where': 'Where are you based?',
    'onb.where_desc': 'We use this to customize your tasks and currency.',
    'onb.lang': 'Choose your language',
    'onb.lang_desc': 'Select your preferred interface language.',
    'onb.next': 'Next Step',
    'onb.start': 'Start Earning',

    // Auth & Welcome
    'auth.welcome_back': 'Welcome Back',
    'auth.create_acc': 'Create Account',
    'auth.enter_details': 'Enter your details to access your account.',
    'auth.enter_signup': 'Sign up to start growing your social presence.',
    'auth.email': 'Email Address',
    'auth.password': 'Password',
    'auth.username': 'Username',
    'auth.signin': 'Sign In',
    'auth.signup': 'Sign Up',
    'auth.or_email': 'Or continue with email',
    'auth.google': 'Continue with Google',
    'auth.no_acc': 'Don\'t have an account?',
    'auth.have_acc': 'Already have an account?',
    'auth.signup_link': 'Sign up',
    'auth.signin_link': 'Log in',

    // Welcome Modal
    'wel.title': 'Welcome to FollowMe!',
    'wel.desc': 'We\'re thrilled to have you. To help you get started on your growth journey, here is a special gift.',
    'wel.gift': '50 FREE COINS',
    'wel.cta': 'Start Growing',

    // Daily Bonus
    'daily.title': 'Daily Reward',
    'daily.desc': 'You came back! Keep your streak alive to earn more.',
    'daily.streak': 'Day Streak',
    'daily.claim': 'Claim Reward',
  },
  FR: {
    'nav.home': 'Accueil',
    'nav.earn': 'Gagner',
    'nav.create': 'Créer',
    'nav.wallet': 'Portefeuille',
    'nav.profile': 'Profil',
    'nav.balance': 'Vos Pièces',
    'nav.add_credits': 'Ajouter Pièces',
    'nav.language': 'Langue',
    
    'dash.overview': 'Aperçu',
    'dash.welcome': "Bon retour! Voici votre activité.",
    'dash.active_campaigns': 'Campagnes Actives',
    'dash.total_interactions': 'Total Interactions',
    'dash.earn_card_title': 'Gagner',
    'dash.earn_card_desc': 'Commencer les tâches',
    'dash.chart_title': 'Analytique',
    'dash.chart_subtitle': 'Performance hebdomadaire',
    'dash.recent_activity': 'Activité Récente',
    'dash.view_all': 'Voir tout',
    'dash.level': 'Votre Niveau',
    'dash.next_level': 'Prochain Niveau',
    'dash.reputation': 'Score de Réputation',
    'dash.lvl_1': 'Novice',
    'dash.lvl_2': 'Étoile Montante',
    'dash.lvl_3': 'Influenceur',
    'dash.lvl_4': 'Célébrité',

    'earn.title': 'Gagner des Pièces',
    'earn.subtitle': 'Engagez-vous pour augmenter votre solde.',
    'earn.streak': 'Série Quotidienne',
    'earn.days': 'Jours',
    'earn.all_caught_up': 'Tout est fait!',
    'earn.no_tasks': 'Aucune tâche disponible.',
    'earn.do_task': 'Faire',
    'earn.verify': 'Vérifier',
    'earn.verifying': 'Vérification...',
    'earn.skip': 'Passer',
    'earn.processing': '...',
    'earn.report': 'Signaler',
    'earn.report_title': 'Pourquoi signalez-vous ceci ?',
    'earn.report_spam': 'Spam ou Arnaque',
    'earn.report_broken': 'Lien cassé',
    'earn.report_offensive': 'Contenu inapproprié',
    'earn.reported_msg': 'Tâche signalée. Merci.',
    'earn.cancel': 'Annuler',
    'earn.submit_report': 'Envoyer',

    'camp.title': 'Campagnes',
    'camp.subtitle': 'Gérez vos promotions.',
    'camp.new': 'Nouvelle Campagne',
    'camp.details': 'Détails',
    'camp.link_label': 'Lien vers contenu',
    'camp.desc_label': 'Description / Légende',
    'camp.desc_place': 'Décrivez votre contenu...',
    'camp.platform': 'Plateforme',
    'camp.goal': 'But',
    'camp.budget_label': 'Budget de la campagne (Pièces)',
    'camp.budget_desc': 'Combien voulez-vous dépenser ?',
    'camp.custom': 'Montant personnalisé',
    'camp.est_reach': 'Portée Est.',
    'camp.actions': 'actions',
    'camp.reward_label': 'Pièces par action',
    'camp.reward_desc': 'Plus de pièces = résultats plus rapides.',
    'camp.targeting': 'Ciblage Avancé',
    'camp.geo': 'Géo-localisation',
    'camp.geo_desc': 'Cibler des pays spécifiques',
    'camp.preview': 'Aperçu',
    'camp.summary': 'Résumé de la commande',
    'camp.total_cost': 'Dépense Totale',
    'camp.insufficient': 'Pièces insuffisantes.',
    'camp.cancel': 'Annuler',
    'camp.launch': 'Lancer',
    'camp.no_active': 'Aucune campagne active',
    'camp.create_first': 'Créer une première campagne',
    'camp.progress': 'Progression',
    'camp.edit': 'Modifier',
    'camp.pause': 'Mettre en pause',
    'camp.resume': 'Reprendre',
    'camp.delete': 'Supprimer',
    'camp.delete_confirm': 'Êtes-vous sûr ? Les pièces inutilisées seront remboursées.',
    'camp.refunded': 'Pièces Remboursées',
    'camp.save_changes': 'Enregistrer',
    'camp.confirm_delete': 'Oui, Supprimer',
    'camp.updated': 'Campagne mise à jour',

    'wallet.title': 'Portefeuille',
    'wallet.balance': 'Solde Actuel',
    'wallet.credits': 'pièces',
    'wallet.billing': 'Région de facturation',
    'wallet.buy_title': 'Acheter Pièces',
    'wallet.best_value': 'Meilleur Choix',
    'wallet.buy_now': 'Acheter',
    'wallet.history': 'Historique',
    'wallet.pay_modal': 'Compléter l\'achat',
    'wallet.pay_method': 'Méthode de paiement',
    'wallet.pay_secure': 'Paiement Sécurisé SSL',
    'wallet.pay_btn': 'Payer',
    'wallet.watch_earn': 'Regarder & Gagner',
    'wallet.watch_desc': 'Regardez des vidéos pour gagner des pièces.',
    'wallet.watch_btn': 'Regarder Vidéo',
    'wallet.watch_reward': '+2 Pièces / Vidéo',
    'wallet.ad_limit': 'Limite: 100 Pièces/Jour',
    'wallet.ad_watching': 'Publicité en cours',
    'wallet.ad_wait': 'Récompense dans',
    'wallet.ad_claim': 'Réclamer +2 Pièces',
    'wallet.ad_limit_hit': 'Limite quotidienne atteinte',

    'prof.invite': 'Inviter & Gagner',
    'prof.invite_desc': 'Recevez 50 pièces par ami invité.',
    'prof.copy_link': 'Copier le lien',
    'prof.link_copied': 'Lien Copié!',
    'prof.linked': 'Comptes Liés',
    'prof.connect': 'Lier',
    'prof.connected': 'Connecté',
    'prof.account': 'Compte',
    'prof.notif': 'Notifications',
    'prof.privacy': 'Confidentialité',
    'prof.lang': 'Langue & Région',
    'prof.support': 'Support',
    'prof.help': 'Centre d\'aide',
    'prof.legal': 'Termes & Privé',
    'prof.sign_out': 'Déconnexion',
    'prof.save': 'Enregistrer',

    'onb.where': 'Où êtes-vous basé?',
    'onb.where_desc': 'Pour personnaliser les tâches et la devise.',
    'onb.lang': 'Choisissez votre langue',
    'onb.lang_desc': 'Sélectionnez la langue de l\'interface.',
    'onb.next': 'Suivant',
    'onb.start': 'Commencer',

    'auth.welcome_back': 'Bon retour',
    'auth.create_acc': 'Créer un compte',
    'auth.enter_details': 'Entrez vos détails pour accéder.',
    'auth.enter_signup': 'Inscrivez-vous pour grandir.',
    'auth.email': 'Adresse Email',
    'auth.password': 'Mot de passe',
    'auth.username': 'Nom d\'utilisateur',
    'auth.signin': 'Se connecter',
    'auth.signup': 'S\'inscrire',
    'auth.or_email': 'Ou continuer avec email',
    'auth.google': 'Continuer avec Google',
    'auth.no_acc': 'Pas de compte?',
    'auth.have_acc': 'Déjà un compte?',
    'auth.signup_link': 'S\'inscrire',
    'auth.signin_link': 'Se connecter',

    'wel.title': 'Bienvenue sur FollowMe!',
    'wel.desc': 'Ravi de vous voir. Voici un cadeau pour commencer.',
    'wel.gift': '50 PIÈCES GRATUITES',
    'wel.cta': 'Commencer',

    'daily.title': 'Récompense Quotidienne',
    'daily.desc': 'Vous êtes revenu ! Gardez votre série pour gagner plus.',
    'daily.streak': 'Jours de suite',
    'daily.claim': 'Réclamer',
  },
  AR: {
    'nav.home': 'الرئيسية',
    'nav.earn': 'كسب',
    'nav.create': 'إنشاء',
    'nav.wallet': 'المحفظة',
    'nav.profile': 'حسابي',
    'nav.balance': 'رصيدك',
    'nav.add_credits': 'شراء عملات',
    'nav.language': 'اللغة',

    'dash.overview': 'نظرة عامة',
    'dash.welcome': "مرحباً بك! إليك نشاط نموك.",
    'dash.active_campaigns': 'حملات نشطة',
    'dash.total_interactions': 'إجمالي التفاعلات',
    'dash.earn_card_title': 'كسب',
    'dash.earn_card_desc': 'ابدأ بإتمام المهام',
    'dash.chart_title': 'تحليلات التفاعل',
    'dash.chart_subtitle': 'أداء التفاعل الأسبوعي',
    'dash.recent_activity': 'النشاط الأخير',
    'dash.view_all': 'عرض الكل',
    'dash.level': 'مستواك',
    'dash.next_level': 'المستوى التالي',
    'dash.reputation': 'نقاط السمعة',
    'dash.lvl_1': 'مبتدئ',
    'dash.lvl_2': 'نجم صاعد',
    'dash.lvl_3': 'مؤثر',
    'dash.lvl_4': 'مشهور',

    'earn.title': 'كسب العملات',
    'earn.subtitle': 'تفاعل مع الآخرين لزيادة رصيدك.',
    'earn.streak': 'سلسلة يومية',
    'earn.days': 'أيام',
    'earn.all_caught_up': 'انتهت المهام!',
    'earn.no_tasks': 'لا توجد مهام متاحة الآن.',
    'earn.do_task': 'تنفيد',
    'earn.verify': 'تحقق وكسب',
    'earn.verifying': 'جاري التحقق...',
    'earn.skip': 'تخطي',
    'earn.processing': '...',
    'earn.report': 'إبلاغ',
    'earn.report_title': 'لماذا تبلغ عن هذا؟',
    'earn.report_spam': 'احتيال أو سبام',
    'earn.report_broken': 'رابط معطل',
    'earn.report_offensive': 'محتوى غير لائق',
    'earn.reported_msg': 'تم الإبلاغ. شكراً لك.',
    'earn.cancel': 'إلغاء',
    'earn.submit_report': 'إرسال البلاغ',

    'camp.title': 'الحملات',
    'camp.subtitle': 'إدارة عروضك الترويجية.',
    'camp.new': 'حملة جديدة',
    'camp.details': 'تفاصيل الحملة',
    'camp.link_label': 'رابط المحتوى',
    'camp.desc_label': 'الوصف / التعليق',
    'camp.desc_place': 'صف المحتوى الخاص بك...',
    'camp.platform': 'المنصة',
    'camp.goal': 'الهدف',
    'camp.budget_label': 'ميزانية الحملة (عملات)',
    'camp.budget_desc': 'كم تريد أن تنفق؟',
    'camp.custom': 'مبلغ مخصص',
    'camp.est_reach': 'الوصول المتوقع',
    'camp.actions': 'تفاعل',
    'camp.reward_label': 'عملات لكل إجراء',
    'camp.reward_desc': 'عملات أعلى تعني نتائج أسرع.',
    'camp.targeting': 'استهداف متقدم',
    'camp.geo': 'الموقع الجغرافي',
    'camp.geo_desc': 'استهداف دول محددة',
    'camp.preview': 'معاينة',
    'camp.summary': 'ملخص الطلب',
    'camp.total_cost': 'إجمالي الإنفاق',
    'camp.insufficient': 'رصيد غير كاف.',
    'camp.cancel': 'إلغاء',
    'camp.launch': 'إطلاق',
    'camp.no_active': 'لا توجد حملات نشطة',
    'camp.create_first': 'أنشئ حملتك الأولى',
    'camp.progress': 'التقدم',
    'camp.edit': 'تعديل الحملة',
    'camp.pause': 'إيقاف مؤقت',
    'camp.resume': 'استئناف',
    'camp.delete': 'حذف الحملة',
    'camp.delete_confirm': 'هل أنت متأكد؟ سيتم استرداد العملات غير المستخدمة.',
    'camp.refunded': 'تم استرداد العملات',
    'camp.save_changes': 'حفظ التغييرات',
    'camp.confirm_delete': 'نعم، حذف',
    'camp.updated': 'تم تحديث الحملة',

    'wallet.title': 'المحفظة',
    'wallet.balance': 'الرصيد الحالي',
    'wallet.credits': 'عملة',
    'wallet.billing': 'منطقة الفوترة',
    'wallet.buy_title': 'شراء عملات',
    'wallet.best_value': 'أفضل قيمة',
    'wallet.buy_now': 'شراء الآن',
    'wallet.history': 'سجل المعاملات',
    'wallet.pay_modal': 'إتمام الشراء',
    'wallet.pay_method': 'طريقة الدفع',
    'wallet.pay_secure': 'دفع آمن SSL',
    'wallet.pay_btn': 'دفع',
    'wallet.watch_earn': 'شاهد واربح',
    'wallet.watch_desc': 'شاهد فيديوهات قصيرة لربح العملات.',
    'wallet.watch_btn': 'شاهد فيديو',
    'wallet.watch_reward': '+2 عملة / فيديو',
    'wallet.ad_limit': 'الحد اليومي: 100 عملة',
    'wallet.ad_watching': 'إعلان قيد التشغيل',
    'wallet.ad_wait': 'المكافأة خلال',
    'wallet.ad_claim': 'استلام +2 عملات',
    'wallet.ad_limit_hit': 'وصلت للحد اليومي',

    'prof.invite': 'ادعُ الأصدقاء واربح',
    'prof.invite_desc': 'احصل على 50 عملة لكل صديق ينضم.',
    'prof.copy_link': 'نسخ الرابط',
    'prof.link_copied': 'تم النسخ!',
    'prof.linked': 'الحسابات المرتبطة',
    'prof.connect': 'ربط',
    'prof.connected': 'متصل',
    'prof.account': 'الحساب',
    'prof.notif': 'الإشعارات',
    'prof.privacy': 'الخصوصية والأمان',
    'prof.lang': 'اللغة والمنطقة',
    'prof.support': 'الدعم',
    'prof.help': 'مركز المساعدة',
    'prof.legal': 'الشروط والخصوصية',
    'prof.sign_out': 'تسجيل خروج',
    'prof.save': 'حفظ التغييرات',

    'onb.where': 'أين تقيم؟',
    'onb.where_desc': 'نستخدم هذا لتخصيص المهام والعملة.',
    'onb.lang': 'اختر لغتك',
    'onb.lang_desc': 'حدد لغة الواجهة المفضلة.',
    'onb.next': 'التالي',
    'onb.start': 'ابدأ الكسب',

    'auth.welcome_back': 'مرحباً بعودتك',
    'auth.create_acc': 'إنشاء حساب',
    'auth.enter_details': 'أدخل تفاصيلك للدخول.',
    'auth.enter_signup': 'سجل لتبدأ النمو.',
    'auth.email': 'البريد الإلكتروني',
    'auth.password': 'كلمة المرور',
    'auth.username': 'اسم المستخدم',
    'auth.signin': 'دخول',
    'auth.signup': 'تسجيل',
    'auth.or_email': 'أو تابع بالبريد',
    'auth.google': 'المتابعة مع Google',
    'auth.no_acc': 'لا تملك حساباً؟',
    'auth.have_acc': 'لديك حساب بالفعل؟',
    'auth.signup_link': 'سجل الآن',
    'auth.signin_link': 'سجل دخول',

    'wel.title': 'مرحباً في FollowMe!',
    'wel.desc': 'سعداء بانضمامك. لمساعدتك في البداية، إليك هدية خاصة.',
    'wel.gift': '50 عملة مجانية',
    'wel.cta': 'ابدأ النمو',

    'daily.title': 'المكافأة اليومية',
    'daily.desc': 'لقد عدت! حافظ على سلسلتك لكسب المزيد.',
    'daily.streak': 'أيام متتالية',
    'daily.claim': 'استلام المكافأة',
  }
};

export const LanguageContext = createContext<I18nContextType>({
  lang: 'EN',
  setLang: () => {},
  t: (key) => key,
  dir: 'ltr'
});

export const useLanguage = () => useContext(LanguageContext);

export const I18nProvider: React.FC<{children: ReactNode, initialLang?: Language}> = ({ children, initialLang = 'EN' }) => {
  const [lang, setLang] = useState<Language>(initialLang);
  
  const t = (key: string): string => {
    return translations[lang][key] || key;
  };

  const dir = lang === 'AR' ? 'rtl' : 'ltr';

  return React.createElement(
    LanguageContext.Provider, 
    { value: { lang, setLang, t, dir } }, 
    children
  );
};
